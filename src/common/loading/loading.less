@import 'src/style/function';

// 花瓣的尺寸
@size: 1.5px;
// 背景色切换的延迟
@duration: 800;
// 离中心点的位置
@transform-origin-y: 170%;
// 花瓣数量
@petal-number: 12;

// 依次变白，按序号带有延迟
.loop(@i) when (@i <= @petal-number) {
  .loading-petal:nth-of-type(@{i}) {
    transform: rotate((360deg / @petal-number) * @i);
    // 一定要括号
    animation-delay: (@i * @duration / @petal-number) * 1ms;
  }

  .loop((@i + 1))
}

@-webkit-keyframes petal {
  0% {
    background-color: var(--system-white);
  }

  100% {
    background-color: var(--icon-grey);
  }
}

.loading {
  .full-size;
  .flex-diagonal-center;
  .loop(1);

  .loading-petal {
    .background-transition;
    position: absolute;
    // 2:7:5
    .size(2 * @size, 7 * @size, 5 * @size);
    background-color: rgba(234, 234, 234, .3);
    margin-top: -5%;
    -webkit-transform-origin-y: @transform-origin-y;
    animation: petal 1ms * @duration linear infinite;
  }
}
